name: Manual UI Test Review

on:
  pull_request:
    types: [opened, labeled, unlabeled, synchronize]

jobs:
  assign-ui-tester:
    name: Assign UI Test Reviewer
    runs-on: ubuntu-latest
    steps:
      - name: Assign UI Tester
        uses: pozil/auto-assign-reviewer@v1
        with:
          reviewers: "ui-test-team"

      - name: Comment on PR to Notify UI Tester
        uses: actions/github-script@v6
        with:
          script: |
            github.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.pull_request.number,
              body: "ğŸ” **è«‹é€²è¡Œäººå·¥ UI æ¸¬è©¦ï¼**\nè«‹æŒ‰ç…§ PR æ¨¡æ¿ä¸­çš„æ¸¬è©¦æ¸…å–®é€²è¡Œæ¸¬è©¦ï¼Œä¸¦å›è¦†çµæœã€‚\n\nğŸš€ **å®Œæˆå¾Œè«‹åŠ ä¸Š `ui-tested âœ…` æ¨™ç±¤**"
            });

  check-ui-test-status:
    name: Check if UI Test Passed
    runs-on: ubuntu-latest
    steps:
      - name: Check Required UI Test Label
        uses: mheap/github-action-required-labels@v2
        with:
          labels: "ui-tested âœ…"
          mode: exactly
          message: "âš ï¸ **é€™å€‹ PR éœ€è¦é€šéäººå·¥ UI æ¸¬è©¦**ï¼ˆè«‹åŠ ä¸Š `ui-tested âœ…` æ¨™ç±¤ï¼‰"
